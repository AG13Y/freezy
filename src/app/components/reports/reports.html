<div class="max-w-7xl mx-auto p-4 dark:text-white">
  <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white mb-6">
    Minhas Avaliações
  </h1>
  <p class="mb-6 text-gray-600 dark:text-gray-400">
    Este é o feedback que você recebeu de seus projetos concluídos.
  </p>

  <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3 mb-8">
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg">
      <div class="p-5">
        <div class="flex items-center">
          <div class="flex-shrink-0 h-22 w-22">
            <mat-icon class="flex justify-center w-20">star_rate</mat-icon>
          </div>
          <div class="ml-5 w-0 flex-1">
            <dl>
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-400 truncate">
                Nota Média
              </dt>
              <dd class="text-3xl font-semibold text-gray-900 dark:text-white">
                {{ averageRating() | number: '1.1-1' }} / 5
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
    
    <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg">
      <div class="p-5">
        <div class="flex items-center">
          <div class="flex-shrink-0 h-22 w-22">
            <mat-icon class="flex justify-center w-20">reviews</mat-icon>
          </div>
          <div class="ml-5 w-0 flex-1">
            <dl>
              <dt class="text-sm font-medium text-gray-500 dark:text-gray-400 truncate">
                Total de Avaliações
              </dt>
              <dd class="text-3xl font-semibold text-gray-900 dark:text-white">
                {{ totalReviews() }}
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>

  <h2 class="text-2xl font-semibold mb-4">
    Feedbacks Recebidos
  </h2>

  @if (isLoading()) {
    <p class="text-gray-500 dark:text-gray-400">Carregando avaliações...</p>
  }

  <ul class="space-y-6">
    @for (item of reviews(); track item.review.id) {
      <li class="bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden">
        <div class="p-6">
          <div class="flex justify-between items-center mb-3">
            <div class="flex text-yellow-400 text-xl">
  <span *ngFor="let i of [1,2,3,4,5]">
    {{ i <= item.review.rating ? '⭐' : '☆' }}
  </span>
</div>
            <span class="text-sm text-gray-500 dark:text-gray-400">
              {{ item.review.timestamp | date: 'dd/MM/yyyy' }}
            </span>
          </div>

          <p class="text-gray-800 dark:text-gray-200 italic">
            "{{ item.review.comment }}"
          </p>

          <div class="mt-4 pt-4 border-t dark:border-gray-700 text-sm text-gray-600 dark:text-gray-400">
            <div class="flex items-center">
              <img [src]="item.reviewer.fotoUrl || 'assets/icon-user.png'" 
                   alt="Foto de {{ item.reviewer.nome }}" 
                   class="h-8 w-8 rounded-full object-cover mr-2">
              <span>
                Feedback de <strong class="text-gray-900 dark:text-white">{{ item.reviewer.nome }}</strong> 
                sobre o projeto <strong class="text-indigo-600 dark:text-indigo-400">{{ item.project.titulo }}</strong>
              </span>
            </div>
          </div>
        </div>
      </li>
    } @empty {
      @if (!isLoading()) {
        <div class="text-center p-6 bg-white dark:bg-gray-800 rounded-lg shadow">
          <mat-icon class="text-7xl text-gray-400">rate_review</mat-icon>
          <p class="text-gray-500 dark:text-gray-400 mt-4">
            Você ainda não recebeu nenhuma avaliação.
          </p>
        </div>
      }
    }
  </ul>
</div>
