
<div class="max-w-4xl mx-auto p-4 dark:text-white">
  <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white mb-6">
    Meus Documentos
  </h1>
  <p class="mb-6 text-gray-600 dark:text-gray-400">
    Gerencie seus documentos, currículos, portfólios e certificados. 
    Estes arquivos podem ser anexados às suas propostas.
  </p>

  <div class="mb-6">
    <button mat-flat-button color="primary" (click)="fileInput.click()" [disabled]="isUploading()">
      <mat-icon>upload_file</mat-icon>
      <span>Fazer Upload de Novo Documento</span>
    </button>
    
    <input type="file" #fileInput (change)="onFileSelected($event)" class="hidden" 
           accept=".pdf,.doc,.docx,.jpg,.png,.jpeg">
    
    @if (isUploading()) {
      <mat-progress-bar mode="indeterminate" class="mt-4 rounded-lg"></mat-progress-bar>
    }
  </div>

  <h2 class="text-2xl font-semibold mb-4 border-t dark:border-gray-700 pt-4">
    Documentos Enviados
  </h2>
  
  @if (isLoading()) {
    <p class="text-gray-500 dark:text-gray-400">Carregando documentos...</p>
  }

  @if (documents().length > 0) {
    <mat-list role="list" class="bg-white dark:bg-gray-800 rounded-lg shadow">
      @for (doc of documents(); track doc.id) {
        <mat-list-item class="h-auto flex justify-center">
          <mat-icon matListItemIcon class="text-gray-500 dark:text-gray-400">
            @switch (true) {
              @case (doc.fileType.includes('pdf')) { picture_as_pdf }
              @case (doc.fileType.includes('image')) { image }
              @case (doc.fileType.includes('word')) { description }
              @default { description }
            }
          </mat-icon>
          
          <div matListItemTitle class="font-medium text-gray-900 dark:text-white">{{ doc.fileName }}</div>
          <div matListItemLine class="text-sm text-gray-500 dark:text-gray-400">
            Enviado em: {{ doc.uploadedAt | date: 'dd/MM/yyyy' }}
          </div>
          
          <div matListItemMeta class="flex space-x-2">
            <a mat-icon-button [href]="doc.downloadUrl" target="_blank" aria-label="Baixar documento"
               class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800">
              <mat-icon>download</mat-icon>
            </a>
            <button mat-icon-button color="warn" (click)="deleteDocument(doc)" aria-label="Excluir documento">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-list-item>
        <br>
      }
    </mat-list>
  } @else {
    @if (!isLoading()) {
      <p class="text-gray-500 dark:text-gray-400">Nenhum documento enviado ainda.</p>
    }
  }
</div>